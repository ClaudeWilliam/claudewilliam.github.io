<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>自己动手写spring-boot-starter | Hill's Notes</title><meta name="keywords" content="java,springboot"><meta name="author" content="Hill"><meta name="copyright" content="Hill"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="写在前面的废话经常有人问我编程是一件很难的事情吗，我想说写程序其实不是一件很难的事情。你只不过是按照你自己的逻辑去写一些if-else、for-while循环，而且好多逻辑产品都会帮你梳理（有需求），你也不是凭空去写一些没有实际应用的功能。但是对于写程序，程序能跑起来有一个很重要的东西，就是跑程序的环境。 这个门槛一下子就提高了，Spring中有很多配置文件，就会让很多人折腾好久。最后发现可能就是">
<meta property="og:type" content="article">
<meta property="og:title" content="自己动手写spring-boot-starter">
<meta property="og:url" content="https://blog.51cloud.win/2019/11/02/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99starter/index.html">
<meta property="og:site_name" content="Hill&#39;s Notes">
<meta property="og:description" content="写在前面的废话经常有人问我编程是一件很难的事情吗，我想说写程序其实不是一件很难的事情。你只不过是按照你自己的逻辑去写一些if-else、for-while循环，而且好多逻辑产品都会帮你梳理（有需求），你也不是凭空去写一些没有实际应用的功能。但是对于写程序，程序能跑起来有一个很重要的东西，就是跑程序的环境。 这个门槛一下子就提高了，Spring中有很多配置文件，就会让很多人折腾好久。最后发现可能就是">
<meta property="og:locale">
<meta property="og:image" content="https://blog.51cloud.win/img/00011.jpg">
<meta property="article:published_time" content="2019-11-02T01:21:08.000Z">
<meta property="article:modified_time" content="2021-04-17T06:14:57.108Z">
<meta property="article:author" content="Hill">
<meta property="article:tag" content="java">
<meta property="article:tag" content="springboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.51cloud.win/img/00011.jpg"><link rel="shortcut icon" href="/img/flag.jpg"><link rel="canonical" href="https://blog.51cloud.win/2019/11/02/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99starter/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: Hill","link":"Link: ","source":"Source: Hill's Notes","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-04-17 14:14:57'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/dog.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">45</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">25</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/00011.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Hill's Notes</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">自己动手写spring-boot-starter</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2019-11-02T01:21:08.000Z" title="Created 2019-11-02 09:21:08">2019-11-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2021-04-17T06:14:57.108Z" title="Updated 2021-04-17 14:14:57">2021-04-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/spring/">spring</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="自己动手写spring-boot-starter"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h4 id="写在前面的废话"><a href="#写在前面的废话" class="headerlink" title="写在前面的废话"></a>写在前面的废话</h4><p>经常有人问我编程是一件很难的事情吗，我想说写程序其实不是一件很难的事情。你只不过是按照你自己的逻辑去写一些if-else、for-while循环，而且好多逻辑产品都会帮你梳理（有需求），你也不是凭空去写一些没有实际应用的功能。但是对于写程序，程序能跑起来有一个很重要的东西，就是跑程序的环境。</p>
<p>这个门槛一下子就提高了，Spring中有很多配置文件，就会让很多人折腾好久。最后发现可能就是一个配置项没有配置（某个配置项写的不对），这个可能这个坑有人踩过（你可以去Google一下），因为你要使用的好多组件都要接入Spring（组件中的对象变成Spring管理的Bean），但是要配置那些Bean是要你很熟悉这个组件，而且你要很了解Spring，知道为什么报错如何解决。为了解决这个spring-boot引入自动配置（这个之前有讲spring-factories中讲过）。这样Spring就可以通过别人之前配置好的Bean直接引入。省去你对环境的配置让你更专注业务的开发，而不是被环境搞的焦头烂额，而且也让Spring更容易使用，引入插件也更方便。（你可以搜SpringMVC和spring-boot接入mybatis的差距）。</p>
<h4 id="什么是spring-boot-starter"><a href="#什么是spring-boot-starter" class="headerlink" title="什么是spring-boot-starter"></a>什么是spring-boot-starter</h4><p>官方给的解释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Starter POMs are a set of convenient dependency descriptors that you can include in your application. You get a one-stop-shop for all the Spring and related technology that you need, without having to hunt through sample code and copy paste loads of dependency descriptors. For example, if you want to get started using Spring and JPA for database access, just include the spring-boot-starter-data-jpa dependency in your project, and you are good to go.</span><br><span class="line">鄙人的英语水平很烂，求轻喷</span><br><span class="line">翻译：</span><br><span class="line">Starter的POMs是一系列方便的依赖集合（pom.xml），在你的应用里（定语从句）。你可以一站式获取Spring和你需要的技术的依赖集合，而不用通过示例代码去复制依赖集合。例如你想通过JPA访问数据库，只需要在你的工程中添加spring-boot-starter-data-jpa这个依赖就可以。</span><br></pre></td></tr></table></figure>

<p>大概意思就是说starter是一种对依赖的synthesize（合成）。可以说stater是一个包装好默认你需要组件的配置信息（默认的配置等于约定），同时你可以自己自定义新的配置来定制化。这样的好处，就是我们不用每次创建一个工程都要把之前实例代码的配置在copy一遍，而是直接在你的工厂加入starter就好了。</p>
<p><img src="https://raw.githubusercontent.com/ClaudeWilliam/pic-blog/master/img/spring-starter.png"></p>
<p>上面的starter依赖的jar和我们自己手动配置的时候依赖的jar并没有什么不同，所以我们可以认为starter其实是把这一些繁琐的配置操作交给了自己，而把简单交给了用户。除了帮助用户去除了繁琐的构建操作，在“约定大于配置”的理念下，<code>ConfigurationProperties</code>还帮助用户减少了无谓的配置操作。并且因为 <code>application.properties</code> 文件的存在，即使需要自定义配置，所有的配置也只需要在一个文件中进行，使用起来非常方便。</p>
<p>starter其实就是帮助用户简化了配置的操作之后，要理解starter和被配置了starter的组件之间并不是竞争关系，而是辅助关系，即我们可以给一个组件创建一个starter来让最终用户在使用这个组件的时候更加的简单方便。基于这种理念，我们可以给任意一个现有的组件创建一个starter来让别人在使用这个组件的时候更加的简单方便，事实上Spring Boot团队已经帮助现有大部分的流行的组件创建好了它们的starter</p>
<h4 id="约定大于配置（convention-over-configuration）"><a href="#约定大于配置（convention-over-configuration）" class="headerlink" title="约定大于配置（convention over configuration）"></a>约定大于配置（convention over configuration）</h4><p>我们这里简称<code>COC</code>。本质是说，开发人员仅需规定应用中不符约定的部分。旨在减少软件开发人员需做决定的数量，获得简单的好处，而又不失灵活性。如果您所用工具的约定与你的期待相符，便可省去配置；反之，你可以配置来达到你所期待的方式。（了解Ruby on Rails的朋友一定知道）。</p>
<h5 id="spring-boot中的默认配置"><a href="#spring-boot中的默认配置" class="headerlink" title="spring boot中的默认配置"></a>spring boot中的默认配置</h5><p>1、maven的目录文件结构，默认有resources文件夹,存放资源配置文件。<code>src-main-resources</code>,<code>src-main-java</code></p>
<p>2、默认有target文件夹，将生成class文件盒编程生成的jar存放在target文件夹下。</p>
<p>3、spring boot默认只会去<code>src-main-resources</code>文件夹下去找application配置文件。</p>
<h4 id="自己动手写一个spring-boot-starter"><a href="#自己动手写一个spring-boot-starter" class="headerlink" title="自己动手写一个spring-boot-starter"></a>自己动手写一个spring-boot-starter</h4><p>如果想自己写一个starter重要是把你这个Jar里面的Bean放到Spring的容器里。我们可以参考一个Spring中自动注入的简单的例子。这个是JdbcTemplate的自动注入过程。这个是JdbcTemplate的自动注入类，这个自动注入的一个实例类。对应spring.fatories中会有一条<code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,</code>的配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span><span class="comment">//用于声明Bean配置类</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; DataSource.class, JdbcTemplate.class &#125;)</span><span class="comment">//当存在DataSource类和JdbcTemplate类才会生效配置</span></span><br><span class="line"><span class="meta">@ConditionalOnSingleCandidate(DataSource.class)</span><span class="comment">//当Spring容器中只有一个DataSource才生效配置</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(DataSourceAutoConfiguration.class)</span><span class="comment">//指定加载顺序在DataSourceAutoConfiguration类后面</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(JdbcProperties.class)</span> <span class="comment">//指定自动配置类JdbcProperties.class</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTemplateAutoConfiguration</span> </span>&#123;<span class="comment">//jdbc模板类的自动配置类</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Configuration</span></span><br><span class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTemplateConfiguration</span> </span>&#123;  <span class="comment">//嵌套的依赖类要使用static，内置的配置类</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">final</span> DataSource dataSource;<span class="comment">//数据源对象</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">final</span> JdbcProperties properties;<span class="comment">//Jdbc属性配置信息</span></span><br><span class="line"></span><br><span class="line">		JdbcTemplateConfiguration(DataSource dataSource, JdbcProperties properties) &#123;</span><br><span class="line">			<span class="keyword">this</span>.dataSource = dataSource;</span><br><span class="line">			<span class="keyword">this</span>.properties = properties;</span><br><span class="line">		&#125;<span class="comment">//JdbcTemplateConfiguration类构造方法</span></span><br><span class="line"></span><br><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">		<span class="meta">@Primary</span><span class="comment">//主要类，当多个实例，选择这个为主要的</span></span><br><span class="line">		<span class="meta">@ConditionalOnMissingBean(JdbcOperations.class)</span><span class="comment">//不存在JdbcOperations.class生效</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> JdbcTemplate <span class="title">jdbcTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">//配置jdbcTemplate信息（丰富jdbc模板类的属性信息）</span></span><br><span class="line">			JdbcTemplate jdbcTemplate = <span class="keyword">new</span> JdbcTemplate(<span class="keyword">this</span>.dataSource);<span class="comment">//设置数据源</span></span><br><span class="line">			JdbcProperties.Template template = <span class="keyword">this</span>.properties.getTemplate();<span class="comment">//获取模板信息</span></span><br><span class="line">			jdbcTemplate.setFetchSize(template.getFetchSize());</span><br><span class="line">			jdbcTemplate.setMaxRows(template.getMaxRows());<span class="comment">//设置最大行数</span></span><br><span class="line">			<span class="keyword">if</span> (template.getQueryTimeout() != <span class="keyword">null</span>) &#123;<span class="comment">//查询超时时间</span></span><br><span class="line">				jdbcTemplate</span><br><span class="line">						.setQueryTimeout((<span class="keyword">int</span>) template.getQueryTimeout().getSeconds());</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Configuration</span></span><br><span class="line">	<span class="meta">@Import(JdbcTemplateConfiguration.class)</span></span><br><span class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">NamedParameterJdbcTemplateConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@Bean</span></span><br><span class="line">		<span class="meta">@Primary</span></span><br><span class="line">		<span class="meta">@ConditionalOnSingleCandidate(JdbcTemplate.class)</span></span><br><span class="line">		<span class="meta">@ConditionalOnMissingBean(NamedParameterJdbcOperations.class)</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> NamedParameterJdbcTemplate <span class="title">namedParameterJdbcTemplate</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">				JdbcTemplate jdbcTemplate)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> NamedParameterJdbcTemplate(jdbcTemplate);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Jdbc属性配置类通过<code>@ConfigurationProperties</code>注解指定配置类前缀</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.jdbc&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Template template = <span class="keyword">new</span> Template();</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Template <span class="title">getTemplate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.template;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@code</span> JdbcTemplate&#125; settings.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Template</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">int</span> fetchSize = -<span class="number">1</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">int</span> maxRows = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">		<span class="meta">@DurationUnit(ChronoUnit.SECONDS)</span></span><br><span class="line">		<span class="keyword">private</span> Duration queryTimeout;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getFetchSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.fetchSize;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFetchSize</span><span class="params">(<span class="keyword">int</span> fetchSize)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.fetchSize = fetchSize;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMaxRows</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.maxRows;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMaxRows</span><span class="params">(<span class="keyword">int</span> maxRows)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.maxRows = maxRows;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> Duration <span class="title">getQueryTimeout</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.queryTimeout;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setQueryTimeout</span><span class="params">(Duration queryTimeout)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.queryTimeout = queryTimeout;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在application.properties文件时这样指定的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.jdbc.template.fetch-size&#x3D;1</span><br><span class="line">spring.jdbc.template.query-timeout&#x3D;1</span><br><span class="line">spring.jdbc.template.max-rows&#x3D;1</span><br></pre></td></tr></table></figure>

<p>这里面<code>spring.jdbc</code>是前缀名，<code>template</code>变量名字，<code>fetch-size</code>变量的属性名字，有了<code>@ConfigurationProperties</code>这个注解，可以通过类直接去指定配置文件属性对应的变量，而不是在xml或者<code>@Bean</code>配置方法去设置。如果使用自动配置还要使用一个注解<code>@EnableConfigurationProperties</code>。</p>
<p>Starter中代码看上去不难，只不过多了好多注解，我这边解释一下这几个注解的使用。我们在自己创建Starter的时候也会用到这些注解，所以我们要对这些注解有很好的理解，这里也有Spring中通用注解。</p>
<table>
<thead>
<tr>
<th>注解</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td><code>@AutoConfigureAfter</code></td>
<td>指定自动配置类加载顺序，在某个特定的配置类后面</td>
</tr>
<tr>
<td><code>@AutoConfigureBefore</code></td>
<td>指定自动配置类加载顺序，在某个特定的配置类前面</td>
</tr>
<tr>
<td><code>@AutoConfigureOrder</code></td>
<td>z指定初始化顺序数越小越先初始化</td>
</tr>
<tr>
<td><code>@Configuration</code></td>
<td>配置到类上，表明这个类声明了多个<code>@Bean</code>注释的方法，<code>@Bean</code>注释的方法用于<code>Spring</code>容器运行中<code>Bean</code>的定义，生成的处理方法。（一般<code>@Bean</code>都是有返回对象的）。主要用于Bean声明和处理。配置类必须作为类提供（即不作为实例返回），从而允许通过生成的子类增强运行时。配置类必须是非最终的。  配置类必须是非本地的（即，不能在方法中声明）。<strong>任何嵌套的配置类都必须声明为 static</strong>。  <code>@Bean</code>方法可能不会再创建其他配置类任何此类实例都将被视为具有常规Bean的配置</td>
</tr>
<tr>
<td><code>@ConditionalOnClass</code></td>
<td>指定路径<code>classpath</code>中存在该类时起效。基于Spring的<code>@Conditional</code></td>
</tr>
<tr>
<td><code>@ConditionalOnSingleCandidate</code></td>
<td>Spring容器中该类型Bean只有一个或@Primary的只有一个时起效</td>
</tr>
<tr>
<td><code>@ConditionalOnBean </code></td>
<td>Spring容器中存在该类型Bean时起效</td>
</tr>
<tr>
<td><code>@ConditionalOnMissingBean</code></td>
<td>指定路径<code>classpath</code>中不存在该类时起效。</td>
</tr>
<tr>
<td><code>@ConditionalOnExpression </code></td>
<td>SpEL表达式结果为true时</td>
</tr>
<tr>
<td><code>@ConditionalOnProperty </code></td>
<td>参数设置或者值一致时起效</td>
</tr>
<tr>
<td><code>@ConditionalOnWebApplication </code></td>
<td>Web应用环境下起效</td>
</tr>
<tr>
<td><code>@EnableConfigurationProperties</code></td>
<td>通过这个注解，可以把外部对应配置的属性值，设置到<code>@Configuration</code>声明的类中<code>@Bean</code>声明的方法中的对象的属性。通过<code>EnableConfigurationPropertiesImportSelector.class</code>实现的</td>
</tr>
<tr>
<td><code>@Import</code></td>
<td>导入一个或者多个Bean配置类(用<code>@configration</code>注解解释的类)</td>
</tr>
<tr>
<td><code>@Bean</code></td>
<td>一般使用在方法上面，是这个方法的返回对象，注册到Bean容器里面</td>
</tr>
<tr>
<td><code>@ConfigurationProperties</code></td>
<td>用于外部绑定配置文件，通过配置<code>（prefix=“spring.jdbc”）</code>前缀配置文件指定外部头。然后通过变量去绑定（<code>spring.jdbc.hello</code>）就是配置对象中hello属性。</td>
</tr>
<tr>
<td><code>@Primary</code></td>
<td>当一个类有多个实例在bean容器里，这个是指定主要的使用的的那个Bean（声明Bean标识）</td>
</tr>
</tbody></table>
<p>简单介绍完大致需要的注解和大致的玩法，下面我说一下怎么玩。</p>
<h5 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h5><p>首先要建一个maven工程，然后给指定一些依赖</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;project xmlns=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">         xsi:schemaLocation=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">    &lt;groupId&gt;com.qjq&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;just-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;0.0.2-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;name&gt;just-spring-boot-starter&lt;/name&gt;</span><br><span class="line">    &lt;description&gt;自定义starter&lt;/description&gt;</span><br><span class="line"></span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;parent&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;</span><br><span class="line">    &lt;/parent&gt;</span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;!--<span class="meta">@ConfigurationProperties</span> <span class="function">annotation <span class="title">processing</span> <span class="params">(metadata <span class="keyword">for</span> IDEs)</span>--&gt;</span></span><br><span class="line"><span class="function">        &lt;!--生成spring-configuration-metadata.json类，需要引入此类--&gt;            </span></span><br><span class="line"><span class="function">        &lt;dependency&gt;</span></span><br><span class="line"><span class="function">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span><br><span class="line"><span class="function">            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;</span></span><br><span class="line"><span class="function">            &lt;optional&gt;<span class="keyword">true</span>&lt;/optional&gt;</span></span><br><span class="line"><span class="function">        &lt;/dependency&gt;</span></span><br><span class="line"><span class="function">        &lt;dependency&gt;</span></span><br><span class="line"><span class="function">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span></span><br><span class="line"><span class="function">            &lt;artifactId&gt;spring-boot-autoconfigure&lt;/artifactId&gt;</span></span><br><span class="line"><span class="function">        &lt;/dependency&gt;</span></span><br><span class="line"><span class="function">        &lt;/dependencies&gt;</span></span><br><span class="line"><span class="function">&lt;/project&gt;</span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>

<p>注意其中 <code>spring-boot-configuration-processor</code> 的作用是编译时生成<code>spring-configuration-metadata.json</code>， 此文件主要给IDE使用，用于提示使用。如在intellij idea中，当配置此jar相关配置属性在<code>application.yml</code>， 你可以用ctlr+鼠标左键，IDE会跳转到你配置此属性的类中。</p>
<p>这里说下artifactId的命名问题，Spring 官方 Starter通常命名为<code>spring-boot-starter-&#123;name&#125;</code> 如 <code>spring-boot-starter-web</code>。</p>
<p>Spring官方建议非官方Starter命名应遵循<code>&#123;name&#125;-spring-boot-starter</code>的格式</p>
<h5 id="创建配置属性类"><a href="#创建配置属性类" class="headerlink" title="创建配置属性类"></a>创建配置属性类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.qjq.justspringbootstarter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.qjq.just&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleBeanProperties</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String  name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String add;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String  filed;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAdd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAdd</span><span class="params">(String add)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.add = add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFiled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> filed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFiled</span><span class="params">(String filed)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.filed = filed;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>这里在properties文件中可以配置一些属性。<code>@SimpleBeanProperties</code>指定前缀名称</p>
<h5 id="编写注入的Bean"><a href="#编写注入的Bean" class="headerlink" title="编写注入的Bean"></a>编写注入的Bean</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.just.share.spring.boot.autoconfigure;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String filed;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String add;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SimpleService</span><span class="params">(String name, String filed, String add)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.filed = filed;</span><br><span class="line">        <span class="keyword">this</span>.add = add;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  处理业务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">dealSimple</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String data =<span class="string">&quot;hello&quot;</span> + name + <span class="string">&quot;world&quot;</span> + filed + <span class="string">&quot;simple&quot;</span> + add;</span><br><span class="line">        System.out.println(data);</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="编写自动注入的类"><a href="#编写自动注入的类" class="headerlink" title="编写自动注入的类"></a>编写自动注入的类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.just.share.spring.boot.autoconfigure;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(SimpleBeanProperties.class)</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123;SimpleBeanProperties.class,SimpleService.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleBeanAutoConfigure</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> SimpleBeanProperties properties;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">SimpleBeanAutoConfigure</span><span class="params">(SimpleBeanProperties properties)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.properties = properties;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnProperty(prefix = &quot;spring.qjq.just&quot;,name = &quot;enable&quot;,havingValue = &quot;true&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> SimpleService <span class="title">simpleService</span><span class="params">()</span></span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> SimpleService(properties.getName(),properties.getFiled(),properties.getAdd());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="编写spring-factories文件"><a href="#编写spring-factories文件" class="headerlink" title="编写spring.factories文件"></a>编写spring.factories文件</h5><p><code>resources/META-INF/</code>下创建<code>spring.factories</code>文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration&#x3D;\</span><br><span class="line">com.qjq.justspringbootstarter.SimpleBeanAutoConfigure</span><br></pre></td></tr></table></figure>

<p>使用Maven install命令打包。然后就可以使用了</p>
<h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><h5 id="创建一个spring-boot工程，导入依赖"><a href="#创建一个spring-boot工程，导入依赖" class="headerlink" title="创建一个spring-boot工程，导入依赖"></a>创建一个spring-boot工程，导入依赖</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.qjq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>just-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.2-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.11.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="在配置文件中加入配置"><a href="#在配置文件中加入配置" class="headerlink" title="在配置文件中加入配置"></a>在配置文件中加入配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spring.qjq.just.name&#x3D;demo</span><br><span class="line">spring.qjq.just.add&#x3D;1234567890</span><br><span class="line">spring.qjq.just.filed&#x3D;application</span><br><span class="line">spring.qjq.enable&#x3D;true</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.demo.templates;</span><br><span class="line"><span class="keyword">import</span> com.just.share.spring.boot.autoconfigure.SimpleService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplicationTests</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> SimpleService simpleService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">contextLoads</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        simpleService.dealSimple();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h5><p><img src="https://raw.githubusercontent.com/ClaudeWilliam/pic-blog/master/img/result.png"></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><p>Spring Boot应用中这些第三方库几乎可以零配置的开箱即用（out-of-the-box），大部分的Spring Boot应用都只需要非常少量的配置代码，开发者能够更加专注于业务逻辑。</p>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/tjudzj/p/8758391.html">Spring Boot Starters是什么？</a></p>
<p><a target="_blank" rel="noopener" href="https://www.xncoding.com/2017/07/22/spring/sb-starter.html">SpringBoot系列 - 自己写starter</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Hill</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://blog.51cloud.win/2019/11/02/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99starter/">https://blog.51cloud.win/2019/11/02/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99starter/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/java/">java</a><a class="post-meta__tags" href="/tags/springboot/">springboot</a></div><div class="post_share"><div class="social-share" data-image="/img/00011.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/12/02/MySql%E7%B4%A2%E5%BC%95%E6%B5%85%E8%B0%88/"><img class="prev-cover" src="/img/00010.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">MySQL索引浅谈</div></div></a></div><div class="next-post pull-right"><a href="/2019/10/22/HTTP%E5%8D%8F%E8%AE%AE%E6%B5%85%E8%B0%88/"><img class="next-cover" src="/img/00006.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">HTTP协议浅谈</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2019/10/22/spring.factories与spring-boot/" title="spring.factories与spring-boot"><img class="cover" src="/img/00008.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-10-22</div><div class="title">spring.factories与spring-boot</div></div></a></div><div><a href="/2017/10/25/ArrayQueue/" title="ArrayBlockingQueue"><img class="cover" src="/img/00002.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2017-10-25</div><div class="title">ArrayBlockingQueue</div></div></a></div><div><a href="/2018/10/05/Hash一致性算法与Java的简单实现/" title="一致性Hash算法与Java的简单实现"><img class="cover" src="/img/00005.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2018-10-05</div><div class="title">一致性Hash算法与Java的简单实现</div></div></a></div><div><a href="/2017/07/27/Java内存模型/" title="Java内存模型"><img class="cover" src="/img/00005.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2017-07-27</div><div class="title">Java内存模型</div></div></a></div><div><a href="/2020/07/16/Java的ClassLoader/" title="Java的ClassLoader"><img class="cover" src="/img/back.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-16</div><div class="title">Java的ClassLoader</div></div></a></div><div><a href="/2022/11/20/Java的性能测试工具JMH/" title="Java热点代码的性能测试工具JMH"><img class="cover" src="/img/00036.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-20</div><div class="title">Java热点代码的性能测试工具JMH</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/dog.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Hill</div><div class="author-info__description">Stay Hungry Stay Foolish</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">45</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">25</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ClaudeWilliam"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/ClaudeWilliam" target="_blank" title="github"><i class="GitHub"></i></a><a class="social-icon" href="https://twitter.com/qjqandjack" target="_blank" title="twitter"><i class="Twitter"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2%E7%9A%84%E5%BA%9F%E8%AF%9D"><span class="toc-number">1.</span> <span class="toc-text">写在前面的废话</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFspring-boot-starter"><span class="toc-number">2.</span> <span class="toc-text">什么是spring-boot-starter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BA%A6%E5%AE%9A%E5%A4%A7%E4%BA%8E%E9%85%8D%E7%BD%AE%EF%BC%88convention-over-configuration%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">约定大于配置（convention over configuration）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#spring-boot%E4%B8%AD%E7%9A%84%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-number">3.1.</span> <span class="toc-text">spring boot中的默认配置</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%86%99%E4%B8%80%E4%B8%AAspring-boot-starter"><span class="toc-number">4.</span> <span class="toc-text">自己动手写一个spring-boot-starter</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B"><span class="toc-number">4.1.</span> <span class="toc-text">创建工程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E7%B1%BB"><span class="toc-number">4.2.</span> <span class="toc-text">创建配置属性类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E6%B3%A8%E5%85%A5%E7%9A%84Bean"><span class="toc-number">4.3.</span> <span class="toc-text">编写注入的Bean</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E8%87%AA%E5%8A%A8%E6%B3%A8%E5%85%A5%E7%9A%84%E7%B1%BB"><span class="toc-number">4.4.</span> <span class="toc-text">编写自动注入的类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BC%96%E5%86%99spring-factories%E6%96%87%E4%BB%B6"><span class="toc-number">4.5.</span> <span class="toc-text">编写spring.factories文件</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-number">5.</span> <span class="toc-text">测试</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAspring-boot%E5%B7%A5%E7%A8%8B%EF%BC%8C%E5%AF%BC%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">5.1.</span> <span class="toc-text">创建一个spring-boot工程，导入依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9C%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%B8%AD%E5%8A%A0%E5%85%A5%E9%85%8D%E7%BD%AE"><span class="toc-number">5.2.</span> <span class="toc-text">在配置文件中加入配置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E4%BB%A3%E7%A0%81"><span class="toc-number">5.3.</span> <span class="toc-text">测试代码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">5.4.</span> <span class="toc-text">输出结果</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">5.5.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">6.</span> <span class="toc-text">参考</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/11/20/Java%E7%9A%84%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7JMH/" title="Java热点代码的性能测试工具JMH"><img src="/img/00036.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java热点代码的性能测试工具JMH"/></a><div class="content"><a class="title" href="/2022/11/20/Java%E7%9A%84%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7JMH/" title="Java热点代码的性能测试工具JMH">Java热点代码的性能测试工具JMH</a><time datetime="2022-11-20T12:03:14.000Z" title="Created 2022-11-20 20:03:14">2022-11-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/10/10/MySQL%E4%B8%AD%E7%9A%84%E6%AD%BB%E9%94%81/" title="MySQL的死锁"><img src="/img/00035.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL的死锁"/></a><div class="content"><a class="title" href="/2022/10/10/MySQL%E4%B8%AD%E7%9A%84%E6%AD%BB%E9%94%81/" title="MySQL的死锁">MySQL的死锁</a><time datetime="2022-10-10T12:03:14.000Z" title="Created 2022-10-10 20:03:14">2022-10-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/20/Reactor%E6%A8%A1%E5%BC%8F%E4%B8%8EEventLoop/" title="Reactor模式与EventLoop"><img src="/img/00034.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Reactor模式与EventLoop"/></a><div class="content"><a class="title" href="/2022/06/20/Reactor%E6%A8%A1%E5%BC%8F%E4%B8%8EEventLoop/" title="Reactor模式与EventLoop">Reactor模式与EventLoop</a><time datetime="2022-06-20T12:03:14.000Z" title="Created 2022-06-20 20:03:14">2022-06-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/10/MySQL%E4%B8%AD%E7%9A%84%E9%94%81%E5%92%8CMVCC/" title="MySQL中的锁与MVCC"><img src="/img/00033.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL中的锁与MVCC"/></a><div class="content"><a class="title" href="/2022/02/10/MySQL%E4%B8%AD%E7%9A%84%E9%94%81%E5%92%8CMVCC/" title="MySQL中的锁与MVCC">MySQL中的锁与MVCC</a><time datetime="2022-02-10T12:03:14.000Z" title="Created 2022-02-10 20:03:14">2022-02-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/10/10/SpringBoot%E5%90%AF%E5%8A%A8%E7%9A%84%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90/" title="SpringBoot启动的过程分析"><img src="/img/00032.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot启动的过程分析"/></a><div class="content"><a class="title" href="/2021/10/10/SpringBoot%E5%90%AF%E5%8A%A8%E7%9A%84%E8%BF%87%E7%A8%8B%E5%88%86%E6%9E%90/" title="SpringBoot启动的过程分析">SpringBoot启动的过程分析</a><time datetime="2021-10-10T12:03:14.000Z" title="Created 2021-10-10 20:03:14">2021-10-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2022 By Hill</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        addClass: [200,() => {
          document.querySelectorAll('mjx-container:not([display=\'true\']').forEach( node => {
            const target = node.parentNode
            if (!target.classList.contains('has-jax')) {
              target.classList.add('mathjax-overflow')
            }
          })
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>